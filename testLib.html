<html>
  <head>
      <style>
          body {
              background-color: azure;
          }
          body div:nth-child(1)
          {
              margin: 0px;
              height:auto;
              border: 3px inset darkGray;
              border-radius:3px;
              padding:10px;
              background: -webkit-linear-gradient(antiqueWhite, silver); /* For Safari 5.1 to 6.0 */
    background: -o-linear-gradient(red, yellow); /* For Opera 11.1 to 12.0 */
    background: -moz-linear-gradient(red, yellow); /* For Firefox 3.6 to 15 */
    background: linear-gradient(antiqueWhite, silver); /* Standard syntax */
              
          }
          h1,h2,h3 {
              margin:auto;
              text-align: center;
          }
      </style>
  </head>
    <script src="scripts/MathStatsAndMisc.js"></script>
    <script src="scripts/utils.js"></script>
    <body>
    <div>
    <h2>Testing the MathStatsAndLib library</h2>
    <p>I have written a set of APIs which started off as loose bunch of functions in a Javascript file, and bundled then into at this point three sets of APIS</p>
    <div id='cloning_API'>
         <h3>Cloning, modifying and propogation <button onclick='showHideDeepCopy()'> (show/ hide section) </button></h3>
         <ul id="deepCopy">
          <li>// sample :<br/> <strong>let jsObjects = JSObjects() ; </strong></li>
          <li id='original'></li>
          <li >// Clone object 'frame' and deepCopy usage for simple clone (no modification list):<br/> 
              &nbsp;<strong> var dest = {};<br/> 
              &nbsp; jsObjects.deepCopy(src,dest) ;<br/></strong></li>
           <li id='simpleDeepCopy'></li>
         </ul>
        <br/>
      
    After running deepCopy WITH a modify list, and adding a date field, this is what we get<br/>
    <div id='modifyList'></div><br/>
    Modified deep copied object
    <div id="deepCopyModified"></div>
    </div>
    <div id='donDom'></div>
    <div id='testNumbers'>rewrewrwerw</div>
    <div id='benchmark'></div>
    
    
    <button onclick ="window.clearInterval(start)">Stop</button>
    <p>
    </p></div>
<script>
var showHideDeepCopy = 'block';
var dcElement  = DOMElement('deepCopy')
showHideDeepCopy = function(){
     showHideDeepCopy == 'block'? showHideDeepCopy='none':showHideDeepCopy = 'block';
     //dcElement.display(showHideDeepCopy);
}
     
function nonReferenceCopy( source, destination,modifyList=null){
    var jsObjects = JSObjects() ;
    //  deepCopyOrig(source, null, destination); 
    console.log( 'jsObjects.deepCopy(source,destination,modifyList); ')
   jsObjects.deepCopy(source,destination,modifyList); 
    
   if (Array.isArray(source))
       {
           destination.push({ deepcopied: true})
           destination.push({ dateCopied: new Date()})
       }
    else if(typeof(source)=="object" )
        {
             destination.deepcopied = true ;
            destination.dateCopied = new Date();
        }
    var refDest = source ;
    if (Array.isArray(source))
       {
           refDest.push({ dateReferenced: new Date()})
       }
    else if(typeof(source)=="object" )
        {
            refDest.dateReferenced = new Date();
        }
    console.log('original:');
    console.log( source);
    console.log( ' reference copy:');
    console.log( refDest);
    console.log( ' non reference copy:');
    console.log( destination);
    
}// non reference copy
var testObj = 
    {
        name: 'Anna',
        place: 'Agra',
        animal: 'Antelope',
        thing :'Armchair',
        0:"zero",
        points: 10,
        playerNumber: 1,
        alternates : {
          item1:'Andrew',
          item2:'Arnold' ,
          item3:'Accra',
          item4:'Adis Ababa' ,
          item5:'African Elephant',
          item6:'Armadillo' ,
          item7: {
            ten: "ten" ,
             arr: [ "a", "b", {name:'1',afe:'2'}]
           }
          
        }
    };
    var simpleCopy = {} ;
nonReferenceCopy(testObj,simpleCopy) ;    
    
document.getElementById('simpleDeepCopy').innerHTML =  '/* dest = <strong>' + JSON.stringify(simpleCopy) + '*/</strong>';   

document.getElementById('original').innerHTML = '/*This is the element being copied*/<br/><strong>var src= ' + JSON.stringify(testObj) + ';</strong>';
var modifyListNPAT=
[
    {
       key: 'name',
       operation: 'searchReplace',
       searchString: 'na',
       operand: 'nabelle'
    } ,
    {
       key: 'animal',
       operation: 'concat',
       operand: 's'
    } ,
    {
       key: 'arr',
       operation: 'concat',
       operand: '32'
    },
    {
       key: 'points',
       operation: '*',
       operand: '1.5'
    }
    ,
    {
       key: 'playerNumber',
       operation: '+',
       operand: '1'
    }
     ,
    {
       key: 'item2',
       operation: 'explicitReplace',
       operand: 'Armitage'
    } ,
    {
       key: 'item1',
       operation: 'searchReplace',
       searchString: 'drew',
       operand: 'toine'
    }
    
]
var mathAPITest = MathsAndStats()  ;
var domElements = DOMElement('donDom');
domElements.text('HEKKO')
    .text('HEKKOOOO',"background-color: red;")
    .fade(0.1, 0.5, 1000)
    .fade(0.5, 0.75, 2000)
    .border("2px solid orange")
    .border("3px solid brown")
    .text("Final")
    .fade(0.75, 1.0, 1000)
    .fade(1.0, 0.75, 500)
    .fade(0.75, 0.5, 750)
    .fade(0.5, 0.25, 1000)
     .fade(0.25, 0.5, 800)
    .fade(0.5, 0.75, 600)
    .fade(0.75, 1.00, 200)
    ;
var initialValue = 456.786;
var numberElements = DOMElement('testNumbers');
var start = window.setInterval(function() {
    return function(domAPI, element, value){ 
        let newValue = Math.random()* value * 1.5; 
        element.textContent = mathAPITest.decimalRound(newValue,4).toString();
        domAPI.conditionExpressionStyle(newValue < value/2.0, "color: red;", "color: green;")
        
    }(numberElements, document.getElementById('testNumbers'),initialValue,mathAPITest);
},500 );
console.log('var mathAPITest = MathsAndStats() ;')
console.log('mathAPITest.decimalRound(3.4555,3) = ', mathAPITest.decimalRound(3.4555,3));
console.log('mathAPITest.circleArea(3) = ',mathAPITest.circleArea(3));
console.log('mathAPITest.circleCircumference(3,4, false/* no rounding */) = ',mathAPITest.circleCircumference(3,4, false));
console.log('mathAPITest.circleCircumference(3,2 /* 2 decimal places */)',mathAPITest.circleCircumference(3,2));
console.log('mathAPITest.average([1,2,3,4])',mathAPITest.average([1,2,3,4]));
console.log('mathAPITest.meanDeviation([3, 6, 6, 7, 8, 11, 15, 16])',mathAPITest.meanDeviation([3, 6, 6, 7, 8, 11, 15, 16]));
console.log('mathAPITest.variance([9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4])',mathAPITest.variance([9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4]));
console.log('mathAPITest.standardDeviation([9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4])',mathAPITest.standardDeviation([9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4]));
Object.prototype.owner = '';
Object.prototype.setOwner = function(stringy){
    console.log('owned by', stringy)
}   
var circleStats = {
    radius: 0.0,
    initialize: function(b) { this.radius  = b; },
    area: circleArea.bind(),
    circumference: circleCircumference.bind()
};
var newCircle = circleStats;
newCircle.setOwner('shshsh');
newCircle.initialize(2);
console.log(newCircle.area(3,9,true));
console.log(newCircle.circumference(3));
var stats = {
    sort: sortList.bind(),
    mean:  average.bind(),
    meanDeviationValue: meanDeviation.bind(),
    varianceValue: variance.bind(),
    standardDeviationValue: standardDeviation.bind()
}

console.log('<<<< stats###' );
    function testQuickSort() { 
console.log('Asc Sort of [4,3,2,1]: ',
            stats.sort.call(sortList,[4,3,2,1],true));
console.log('Asc Sort of [9, 7, 5, 11, 12, 2, 14, 3, 10, 6]: ',
            stats.sort.call(sortList,[9, 7, 5, 11, 12, 2, 14, 3, 10, 6],true));
console.log('Asc Sort of [1, 1, 1, 1, 1, 1,1, 1, 1, 1]: ',
            stats.sort.call(sortList,[1, 1, 1, 1, 1, 1,1, 1, 1, 1],true));
console.log('Asc Sort of [1, 2, 2, 10, 4, 1,2, 1, 1, 1]: ',
            stats.sort.call(sortList,[1, 2, 2, 10, 4, 1,2, 1, 1, 1],true));
console.log('Desc Sort of [1, 2, 2, 10, 4, 1,2, 1, 1, 1]: ',
            stats.sort.call(sortList,[1, 2, 2, 10, 4, 1,2, 1, 1, 1],false));
console.log('Desc Sort of [1,2]: ',
            stats.sort.call(sortList,[1,2],false));
console.log('Sort of [1,1]: ',
            stats.sort.call(sortList,[1,1],true));
    }
console.log('Average of [1,2,3,4]: ',
            stats.mean.call(average,[1,2,3,4]));

console.log('Mean Dev of [3, 6, 6, 7, 8, 11, 15, 16]: ',
            stats.meanDeviationValue.call(meanDeviation,[3, 6, 6, 7, 8, 11, 15, 16]));
console.log('Variance of [9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4]: ',
            stats.varianceValue.call(variance,[9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4]));
console.log('Std Dev of [9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4]: ',
            stats.standardDeviationValue.call(standardDeviation,[9, 2, 5, 4, 12, 7, 8, 11, 9, 3, 7, 4, 12, 5, 4, 10, 9, 6, 9, 4]));
console.log('##### stats>>>>>' )

var testNamePlaceAnimalThingArray = [];
testNamePlaceAnimalThingArray.push(testObj);

var des={};
nonReferenceCopy(testObj,des,modifyListNPAT);
document.getElementById('modifyList').innerHTML = JSON.stringify(modifyListNPAT);    
document.getElementById('deepCopyModified').innerHTML = JSON.stringify(des);    
testNamePlaceAnimalThingArray.push(des);

for (i = 0; i < 10; i++){
    var nmodifyListNPAT=
[
    {
       key: 'name',
       operation: 'concat',
       operand: i
    } ,
    {
       key: 'animal',
       operation: 'concat',
       operand: i + ' ' + i    },
    {
       key: 'points',
       operation: '*',
       operand: parseFloat(i + '0.05')
    }
    ,
    {
       key: 'playerNumber',
       operation: '+',
       operand: i
    }
    
]
    var newDes = {};

     nonReferenceCopy(des,newDes,nmodifyListNPAT);
    testNamePlaceAnimalThingArray.push(newDes);
}
    console.log(testNamePlaceAnimalThingArray);
var arrayX = ['a','b','c', {name: 'eeshan', age: 8, hobbies: ['cricket', 'reading', 'biking']}
             ];
var errB = [];
console.log('####### TESTING Object.modify fields');
let OSource = {
    name: "goofy",
    lastName: "dock",
    iteration: 1
   
};
console.log('>>> Before', OSource);

 var OmodifyList=
[
   
   {
       key: 'name',
       operation: 'explicitReplace',
       operand: 'Donald'
    }, {
       key: 'lastName',
       operation: 'searchReplace',
       searchString: 'o',
       operand: 'u'
    },
    {
       key: 'iteration',
       operation: '+',
       operand: 1
    }
    
];
OSource.modifyFields(OmodifyList);
    console.log('<<<<  After', OSource);

nonReferenceCopy(arrayX,errB);
var staticData = [
  {
    name:  'Clothes and Apparel',
    level2 : [
      {
        name: 'Tee Shirts',
        items : [
            {
           name: 'Quick Dry Tee, Champion gray with black lattice pattern',
           skuNum: 'CHQDTGBL',
           costPrice: 22.99
            },
            {
           name: 'Quick Dry Tee, Champion beige with chocolate lattice pattern',
           skuNum: 'CHQDTBBR',
           costPrice: 22.99
            },
           {
           name: 'Quick Dry Tee, Champion orange with yellow lattice pattern, Ferari Logo',
           skuNum: 'CHQDTOYFER',
           costPrice: 26.99
            },
            {
           name: 'Quick Dry Tee, Nike plain red',
           skuNum: 'SHIRNK2341DRY',
           costPrice: 28.99
            },
             {
           name: 'Quick Dry Tee, Ascis Soccer World cup 2014 logo special ed',
           skuNum: '452ASCSPTEE',
           costPrice: 44.99
            },
             {
           name: 'Mesh Tee, Nautica light golden yellow',
           skuNum: 'SWTEE7861',
           costPrice: 54.99
            },
             {
           name: 'Ascis Quick Dry Soccer World cup 2014 logo special ed',
           skuNum: 'TEE452ASCSP',
           costPrice: 44.99
            },
             {
           name: 'Ascis Quick Dry Soccer World cup 2014 logo special ed',
           skuNum: 'TEE452ASCSP',
           costPrice: 44.99
            }
          
        ]
      },
        {
        name: 'Workout shorts',
        items : [
            {
           name: 'Quick Dry shorts, Champion gray with black lattice pattern',
           skuNum: 'CHQDSGBL',
           costPrice: 22.99
            },
            {
           name: 'Quick Dry shorts, Champion beige with chocolate lattice pattern',
           skuNum: 'CHQDSBBR',
           costPrice: 22.99
            },
           {
           name: 'Champion orange with yellow lattice pattern, Ferari Logo',
           skuNum: 'CHQDSOYFER',
           costPrice: 26.99
            },
            {
           name: 'Nike plain red, white strip at the side',
           skuNum: 'SHORNK2341DRY',
           costPrice: 28.99
            },
             {
           name: 'Ascis complementary to special ed Tee',
           skuNum: '452ASCSPSHORT',
           costPrice: 44.99
            },
             {
           name: 'Nautica light golden yellow',
           skuNum: 'SWSHO7861',
           costPrice: 54.99
            },
             {
           name: 'Ascis Soccer World cup 2014 logo special ed',
           skuNum: '452ASCSP',
           costPrice: 44.99
            },
             {
           name: 'Ascis Quick Dry Soccer World cup 2014 logo special ed',
           skuNum: '452ASCSP',
           costPrice: 44.99
            }
          
        ]
      }
      
    ]
  },
  {
    name:  'Tennis Equipment',
    level2 : [
      {
        name: 'Tennis Balls',
        items : [
            {
           name: 'All court yellow 3 pack Wilson ',
           skuNum: 'W3AYY',
           costPrice: 7.99
            }, {
           name: 'Hard court yellow, 3 pack Wilson ',
           skuNum: 'W3HYY',
           costPrice: 7.99
            }, {
           name: 'Grass court yellow, 3 pack Wilson ',
           skuNum: 'W3GRYY',
           costPrice: 9.99
            }, {
           name: '3 pack Wilson all court yellow',
           skuNum: 'W3GRYY',
           costPrice: 9.99
            }
          
        ]
      }
    ]
  }
];
var staticDataDest = [];
nonReferenceCopy(staticData, staticDataDest);
    var prim1 = 1, prim2 = null;
    nonReferenceCopy(prim1,prim2);
let counter = 0;
var setTimeout = function( callback, timeout){
    for (let k = 0; k < timeout;k++){
        if (k % 100 == 0)
             console.log(k, 'th ieration')
    }
    console.log('executing function');
    callback();
}
//setTimeout(function() { console.log('!!! CALLED BACK')}, 30000);
var greetings = [
    'Hello',
    'Namaste',
    'Hola',
    'Bonjour',
    'Guten Tag'
]
function makeGreeting(index)
    {
        return function (firstName, lastName){
            console.log(greetings[index], ' ', firstName, ' ', lastName);
        }
        
    }
var functions = [];
for (var k = 0; k < greetings.length;k++){
    var indexToSeq = parseInt(Math.random() *(greetings.length));
    functions.push(makeGreeting(indexToSeq));
}
    for (var l = 0; l < greetings.length;l++){
        functions[l]('Jihn', 'doe');
    }
/*
function greet(name, counter) {
    var arr = [];
    for (let i= 0 ; i < 3 ; i++)
        arr.push(function()
                 {
            console.log(i);
        })
    
    return arr;
}
var ff = greet();
ff[0]();
ff[1]();
ff[2]();
    
function greet2(name, counter) {
    var arr2 = [];
    for (var i= 0 ; i < 3 ; i++)
        arr2.push(( function(j)
           {   return function()   {
            console.log(j);
        }})(i) );
    
    return arr2;
}
var ff2 = greet2();
ff2[0]();
ff2[1]();
ff2[2]();
*/
     </script>
        </body>
</html>